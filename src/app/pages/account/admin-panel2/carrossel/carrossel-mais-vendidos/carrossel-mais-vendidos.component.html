<div class="carrossel-mais-vendidos-component">
  <div class="mb-3">
    <h6 class="m-0">Carrossel Mais Vendidos</h6>
    <p class="text-muted small mb-0">
      Produtos configurados como "Mais Vendidos" aparecerão automaticamente neste carrossel
    </p>
  </div>

  <div *ngIf="isLoading()" class="text-center text-muted py-3">
    <div class="spinner-border spinner-border-sm" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
    <p class="mt-2 mb-0">Carregando produtos...</p>
  </div>

  <div *ngIf="!isLoading() && produtos().length === 0" class="alert alert-info">
    ℹ️ Nenhum produto marcado como "Mais Vendido" encontrado.
    <br />
    <small>Para adicionar produtos a este carrossel, marque-os como "Mais Vendido" no gerenciamento de produtos.</small>
  </div>

  <div class="table-responsive" *ngIf="!isLoading() && produtos().length > 0">
    <table class="table table-striped align-middle">
      <thead>
        <tr>
          <th>Imagem</th>
          <th>Nome</th>
          <th>Preço</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let produto of produtos()">
          <td>
            <img
              [src]="getImagemPrincipal(produto)"
              [alt]="produto.nome"
              style="max-width: 80px; height: auto; border-radius: 4px;"
              (error)="onImageError($event)"
              onerror="this.src='/assets/logo/Logo-Thiers.png'"
            />
          </td>
          <td>
            <div class="fw-semibold">{{ produto.nome }}</div>
            <small class="text-muted" *ngIf="produto.descricao">
              {{ produto.descricao.length > 50 ? (produto.descricao.substring(0, 50) + '...') : produto.descricao }}
            </small>
          </td>
          <td>
            <div class="fw-semibold text-primary">
              {{ formatarPreco(produto.precoVenda || 0) }}
            </div>
            <small class="text-muted text-decoration-line-through" *ngIf="produto.precoDe && produto.precoVenda && produto.precoDe > produto.precoVenda">
              {{ formatarPreco(produto.precoDe) }}
            </small>
          </td>
          <td>
            <span
              class="badge"
              [class.bg-success]="produto.ativo"
              [class.bg-secondary]="!produto.ativo"
            >
              {{ produto.ativo ? "Ativo" : "Inativo" }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

